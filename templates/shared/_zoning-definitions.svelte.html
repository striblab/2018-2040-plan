<aside class="zoning-definitions">
  {#each Object.entries(zoningDefs) as [type, definitions]}
    {#if typeNames[type]}
      <h3 class="label">{ typeNames[type] }</h3>

      <div class="definitions row">
        {#each  definitions as def}
          <div class="definition col col-50 col-md-33 col-lg-25">
            <dl>
              <dt>
                { def.code === def.label ? def.label : `${def.code}: ${def.label}` }
                {#if type = '2040-built-form' && builtFormsColors[def.code]}
                  <span class="label-swatch" style="background-color: { builtFormsColors[def.code] };"></span>
                {/if}
              </dt>

              <dd>
                { def.description }
              </dd>
            </dl>

            <div class="placeholder"></div>
          </div>
        {/each}
      </div>
    {/if}
  {/each}
</aside>

<script>
  import { groupBy } from "lodash";
  import zoningDefs from "../../sources/zoning_definitions.json";
  import mapConfig from "../../app/shared/map-config.js";

  export default {
    data: () => {
      return {
        zoningDefs: groupBy(zoningDefs, "type"),
        builtFormsColors: mapConfig.builtFormsColors,
        typeNames: {
          "2040-built-form": "Minneapolis 2040 Plan built form definitions",
          //"2040-land-use": "Minneapolis 2040 Plan land use definitions",
          zoning: "Current Minneapolis zoning codes"
        }
      };
    }
  };
</script>
